<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" media='all' href="./sass/list.scss">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Top New-York Stories</title>
</head>
<script>

var url = "https://api.nytimes.com/svc/topstories/v2/home.json";
url += '?' + $.param({
    'api-key': 'QropoB1jKqlMtbRyu7zvuxsz3nrGntLq',
    'section': 'World'
});

$.ajax({
    url: url,
    method: 'GET',
})
.then(data =>{
    // console.log(result.results[0].title);
    /* <img src="${story['multimedia']}" />*/

    console.log(data);
    let output = '';

    data.results.slice(0, 4).map(story => {
        output += `
        <div id="beforeCollapse" class='api-list'>
            <div class="collapse">
                <button style="color:blue;" id='button'>Story </button>
            
            <div class='active'>
                <h1>${story['title']}</h1>
                <p>${story['abstract']}<p>
                <a href='${story['url']}'>Link</a>
                <span>${story['created_date']}</span>
            </div>
            </div>
        </div>
        `;
    })
    document.querySelector("#output").innerHTML = output;

})
.catch(function(err){
    throw err;
})


// const showArticle = document.querySelector('#button');
// var i;
// for(i = 0; i < showArticle.length; i++){
//     showArticle[i].addEventListener('click', function(){
//         this.classList.toggle("active");

//         var accordion = this.nextElementSibling;
//         if (accordion.style.display === "block"){
//             accordion.style.display = "none";
//         } else {
//             accordion.style.display = "block"
//         }
//     })
// }

</script>
<body>
    <h2>Top Stories</h2>
    <div id="output"></div>
</body>
    <script src="js/load.js"></script>
</html>